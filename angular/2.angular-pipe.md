## 内置管道
### 大小写转换
```
<p>{{'Angular' | uppercase}}</p> // ANGULAR
<p>{{'Angular' | lowercase}}</p> // angular
```
### 数值格式化
```
pi: number = 3.14
e: number = 2.718281828
<p>{{e | number: '3.1-5'}}</p> // 002.71828
<p>{{e | number: '4.5-5'}}</p> // 0,002.71828
<p>{{e | number: '4.0'}}</p> // 0,002.718
<p>{{e | number: '4.'}}</p> // 0,002.718
```
`{minIntegerDigits}.{minFractionDigits}-{maxfractionDigits}`
- minIntegerDigits：整数部分保留最小的位数，默认值为1.
- minFractionDigits：小数部分保留最小的位数，默认值为0.
- maxFractionDigits：小数部分保留最大的位数，默认值为3.
小数点左边的数字表示最少保留的位数，如果原数值整数位不足，则用0补齐；小数点右边表示小数的最小位数和小数的最大位数，如果原值的小数位大于最大位数，要四舍五入保留到最大位数；如果原值的小数位小于最小位数，则要不足小数位补0。
### 日期格式化
|日期|标志符|缩写|全称|单标志符|双标志符|
|:--|:--|:--|:--|:--|:--|
|地区|G|G(AD)|GGGG(Anno Domini)|||
|年|y|||y(2016)|yy(16)|
|月|M|MMM(Jun)|MMMM(June)|M(6)|MM(06)|
|日|d|||d(8)|dd(08)|
|星期|E|E,EE,EEE(Fri)|EEEE(Friday)|||
|时间(AM,PM)|j|||j(8 PM)|jj(08 PM)|
|12小时制|h|||h(8)|hh(08)|
|24小时制|H|||H(20)|HH(20)|
|分|m|||m(5)|mm(05)|
|秒|s|||s(8)|ss(08)|
|时区|Z||Z(china Standard Time)|||
|时区|z|z(GMT-8:00)||||

```
date:Date = new Date('2016-06-08 20:05:08');
<p>{{date | date: "y-MM-dd EEEE"}}</p> //2016-06-08 Wednesday
```
### PercentPipe
```
a = 0.269
<p>{{a | percent}}</p> // 27%
<p>{{a | percent:'4.3-5'}}</p> // 0,026.900%
```
`{{ value_expression | percent [:digitsInfo[:locale]] }}`
如果没有digitsInfo则按照整数取（四舍五入），如果有digitsInfo，则按照规则取。

### CurrencyPipe
`expression | currency[: currencyCode[: display[: digitInfo]]]`
- currency 要显示内容（如'USD'，也可以是自定义的）
- currencyCode
    - 'code' 显示内容（如'USD'）
    - 'symbol'（默认） 显示符号（例如$）
    - 'symbol-narrow'
    - 布尔值 true用于符号 false用于code
- digitInfo 按照数值的规则

### SlicePipe（非纯管道）
```
str = 'abcdefghij';
<p>{{str | slice:0:4}}</p> // 'abcd'
<p>{{str | slice:4:0}}</p> // ''
<p>{{str | slice:-4}}</p> // 'ghij'
```

### JsonPipe（非纯管道）
将数据对象通过JSON.stringify()转换成对象字符串，并不改变原数据。

## 管道分类
### 纯管道
仅当管道输入值变化的时候，才执行转换操作，默认的类型是 pure 类型。（备注：输入值变化是指原始数据类型如：string、number、boolean、Symbol等的数值发生变化或者对对象引用（Date、Array、Function、Object）的更改）。Angular会忽略对象内部的更改，除非是引用地址的变化。
### 非纯管道
angular组件在每次变化检测期间都会执行，如鼠标点击或移动都会执行 impure 管道。

将管道设置为非纯管道：
```
@Pipe({
    name: 'SexReformPipe',
    pure: false
})
```

## 管道链
将多个管道用`|`连接在一起，组成管道链对数据进行处理。
```
<p>{{'abcdefgh' | slice:0:3 | uppercase}}</p>  // 'ABC'
```

## 自定义管道
- @Pipe装饰器定义Pipe的metadata信息
- 实现PipeTransform接口中定义的transform方法，接受一个输入值和一些可选参数，并返回转换后的值
- 不可以返回html

```
import { Pipe, PipeTransform } form '@angular/core'
@Pipe({name: 'exponentialStrength'})
export class ExponentialStrengthPipe implements PipeTransform {
  transform(value: number, exponent: string): number {
    let exp = parseFloat(exponent);
    return Math.pow(value, isNaN(exp) ? 1 : exp);
  }
}

@Pipe({ name: 'sexReform' })
export class SexReformPipe implements PipeTransform {
    transform(value: string):string{
        switch(value){
            case 'male': return '男';
            case 'female': return '女';
            default: return '';
        }
    }
}
```
使用自定义管道
```
<p>Super power boost: {{2 | exponentialStrength: 10}}</p>
<p>{{sexValue | sexReform}}</p>
<p class="{{sexValue | sexReform}}"></p>
```
`定义完管道之后，要手动注册自定义管道，添加到declarations数组中`。

### 非纯AsyncPipe

