## 函数式编程

函数式编程是一种 "编程范式"（programming paradigm），也就是如何编写程序的方法论。它属于 "结构化编程" 的一种，主要思想是把运算过程尽量写成一系列嵌套的函数调用。OOP自顶向下架构层层分解，FP自底向上层层组合（复合）

> 函数式编程基础条件
- 函数为一等公民，指的是函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数，传入另一个函数，或者作为其它函数的返回值。当编程语言将函数视为“第一等公民”，那么相当于它支持`高阶函数`（`高阶函数`：接受一个或多个函数作为输入；输出一个函数）
    - Memoization技术提升性能：满足引用透明的表达式，就是任意两次调用只要输入相同，其结果总是不变的，于是可以将第一次的结果缓存起来，遇到下一次执行时直接替换，依然能保证程序的正确性。
    - 延迟求值（Lazy Evaluation）：表达式不在它被绑定到变量时就立即求值，而是在该值被用到的时候才计算求值，延迟求值有利于程序性能的提升。延迟求值的最大好处就是利于模块化。
    - currying技术进行函数封装
    ```
    输出斐波那契数列的第10到20，前十个偶数，前5个能被3整除的数
    fiboSequence = createFibonacci()
    fiboSequence[10: 20] # 数列第20个之后的不会计算

    evenFiboSequence = pickEven（fiboSequence）#挑选偶数
    evenFiboSequence[0: 10]

    newList = pick3(fiboSequence)
    newList[0: 5]
    ```
```
numberList = [0,1,2,3,4,5,6,7,8,9]
分别实现对每个元素的操作
def map(fn, ary)
    newList=[];
    for num in  numberList:
        newList.append(fn(num))

map(lambda x: x+1, numberList) // lambda关键字用于定义一个匿名函数，x表示输入，冒号后是函数体同时也是返回值。
```

```
var fn=function(i){console.log(i)};
[1,2,3].forEach(fn);
// fn变量就是一个函数，可以作为一个函数的参数
```
- 函数式编程语言主张将函数写成`纯函数`
    - 函数的结果只依赖于输入的参数且与外部系统状态无关——只要输入相同，返回值总是不变的
    - 除了返回值外，不修改程序的外部状态（全局的变量，入参）——满足这一条件也被称作“没有副作用（side effect）”
- `引用透明`：如果一个表达式，对于相同的输入，总是有相同的结果并且不修改程序其他部分的状态，那么这个表达式是引用透明的。
- 并发执行

> 只用“表达式”，不用“语句”
“表达式”是一个单纯的运算过程，总是有返回值；“语句”是执行某些操作，没有返回值。函数式编程要求，只使用表达式，不适用语句，也就是说，每一步都是单纯的运算，而且都有返回值。原因是函数式编程的开发动机，已开始就是为了处理运算，不考虑系统的读写（I/O）。“语句”属于对系统的读写操作，所以就被排斥在外。但是在实际中，不做I/O是不可能的，因此编程过程中，函数式编程只要求把I/O限制到最小，不要有不必要的读写行为，保持运算过程的单纯性。

> 没有“副作用”

副作用：指的是函数内部与外部互动（最典型的情况就是修改全局变量的值），产生运算以外的其他结果。函数式编程强调没有“副作用”，函数保持独立，所有的功能就是返回一个新值，没有其他行为，尤其是不得修改外部变量的值。

> 不修改状态

在其他类型的语言中，变量往往用来保存状态（state），不修改变量，意味着状态不能保存在变量中，函数式编程使用参数保存状态。
```
function reverse(string){
    if(string.length==0){
        return string;
    }else{
        return reverse(string.substring(1, string.length)) + string.substring(0,1);
    }
}
```
> 引用透明